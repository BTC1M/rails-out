<div class="bodyhome">
  <div class="logo mx-auto">
    <p class="out">OUT</p>
  </div>
  <div class="color-line-top d-flex"></div>
  <div class="d-flex justify-content-end" style="width:100%;">
  <%= link_to 'Deconnexion', destroy_user_session_path, class: "btn_deconnexion mt-2 mr-5", style: 'text-decoration: none !important;', method: :delete, data: { confirm: 'Are you sure?' } %>
  <!-- <button class="btn_deconnexion"><p>Deconnexion</p></button> -->
</div>
  <%= image_tag "artist-test.png", :class => "avatar-large mt-3"%>
  <div class="ses_prochains_events d-flex flex-row align-items-center justify-content-start" style="width: 80%; margin:0px;">
    <div class="taille_texte">Vos styles</div>
  </div>
  <p class="lign-chapiter2" style="left: 0px;"> </p>

  <div class="d-flex flex-row justify-content-center flex-wrap mt-4 px-3">

    <% presence = nil %>
    <% @styles.each do |style| %>
      <% presence = false %>
      <% current_user.styles.each do |mystyle| %>
        <% if mystyle.name == style.name %>
          <% presence = true %>
        <% end %>
      <% end %>

      <% if presence == false %>
        <%= link_to style.name, user_styles_path(style.id), method: :create, class: "preferences px-2 mx-2 my-1" %>
      <% else %>
        <%= link_to style.name, user_style_path(style.id), method: :delete, class: "preferences_selection px-2 mx-2 my-1" %>
      <% end %>
    <% end %>

  </div>
</div>

<!-- ---------------------------------------------- -->
<div class="ses_prochains_events d-flex flex-row align-items-center justify-content-start" style="height: 30px;">
    <div class="taille_texte">Vos evènements</div>
  </div>
  <p class="lign-chapiter2"> </p>

    <div class="app" style="margin-top: 0px;">
      <ul class="hs">
        <% current_user.user_participations.each do |user_participation| %>
            <li>
              <%= link_to(event_path(user_participation.event.id)) do %>
              <div class="card-event ml-2">
              <div class="color-line-event"> </div>
              <%= image_tag user_participation.event.photo, :class => "img_event" %>
              <h3 class="title-event"><%= user_participation.event.title %></h3>
              <p class="text-event"> <%= image_tag "musical-note.png", :size => "15x15", :class => "logo_event" %> <%= user_participation.event.category %> -
                <% artist_category_array_home = [] %>
                <% user_participation.event.artists.each do |artist| %>
                  <% unless artist_category_array_home.include?(artist.category + " ") %>
                    <% artist_category_array_home << artist.category + " " %>
                  <% end %>
                <% end %>
                <% if artist_category_array_home.length > 2 %>
                  <%= artist_category_array_home.first(2).join %>...
                <% else %>
                  <%= artist_category_array_home.join %>
                <% end %><br>
                <%= image_tag "time.png", :size => "15x15", :class => "logo_event" %>
                  <% start_time = user_participation.event.start_time %>
                  <% end_time = user_participation.event.end_time %>
                  <%= start_time.strftime('%R') %> - <%= end_time.strftime('%R') %><br>
                <%= image_tag "location-point.png", :size => "15x15", :class => "logo_event" %>
                <% adresse_for_card = user_participation.event.place.address %>
                <% if adresse_for_card.length > 25 %>
                  <%= adresse_for_card[0..25] + '...'%>
                <% else %>
                  <%= user_participation.event.place.address %>
                <% end %>
                </p>
              </div>
            <% end %>
            </li>
        <% end %>
      </ul>
  <div class="ses_prochains_events d-flex justify-content-start" style="height: 30px;">
    <div class="taille_texte">Vos artistes préférés</div>
  </div>
  <p class="lign-chapiter2"> </p>
  <ul class="hs2">
    <% current_user.find_liked_items.each do |artist| %>
      <li class="li_height">
      <% unless artist.name.match?("Résident") %>
        <%= link_to(artist_path(artist.id)) do %>
          <div class="card-artist mt-5">
            <h3 class="card-title-artist"> <%= artist.name %></h3>
            <%= image_tag artist.photo, :class => "img_artist-card" %>
          </div>
          <% end %>
        <% end %>
      </li>
    <% end %>
  </ul>

</div>

